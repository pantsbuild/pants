# GENERATED, DO NOT EDIT!
# To change, edit `src/python/pants_release/generate_github_workflows.py` and run:
#   ./pants run src/python/pants_release/generate_github_workflows.py

concurrency:
  cancel-in-progress: true
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.sha }}
env:
  PANTS_CONFIG_FILES: +['pants.ci.toml']
  RUST_BACKTRACE: all
jobs:
  build_wheels_macos14_arm64:
    env:
      ACTIONS_ALLOW_USE_UNSECURE_NODE_VERSION: false
      MODE: debug
      PANTS_REMOTE_CACHE_READ: "false"
      PANTS_REMOTE_CACHE_WRITE: "false"
    if: ((github.repository_owner == 'pantsbuild'))
    name: Build wheels (macOS14-ARM64)
    runs-on:
      - macos-14
    steps:
      - name: Set up Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"
      - run: |
          curl --proto '=https' --tlsv1.2 -fsSL https://static.pantsbuild.org/setup/get-pants.sh | bash

          cd $(mktemp -d)

          cat > pants.toml <<EOF
          [GLOBAL]
          pants_version = "2.24.0"

          backend_packages = [
            "pants.backend.python",
            "pants.backend.experimental.python.lint.ruff.check",
          ]
          [python]
          interpreter_constraints = ["CPython==3.10.*"]

          [lint]
          batch_size = 1
          EOF

          echo "python_sources(name='src')" > BUILD

          for i in $(seq 1 16); do
              touch src$i.py
          done

          pants lint ::

    timeout-minutes: 90
name: Pull Request CI
"on":
  pull_request: {}
  push:
    branches:
      - main
      - 2.*.x
