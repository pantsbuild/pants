# GENERATED, DO NOT EDIT!
# To change, edit `src/python/pants_release/generate_github_workflows.py` and run:
#   ./pants run src/python/pants_release/generate_github_workflows.py


concurrency:
  cancel-in-progress: true
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.sha }}
env:
  PANTS_CONFIG_FILES: +['pants.ci.toml']
  RUST_BACKTRACE: all
jobs:
  build_wheels_macos11_arm64:
    env:
      MODE: debug
      PANTS_REMOTE_CACHE_READ: 'false'
      PANTS_REMOTE_CACHE_WRITE: 'false'
    name: Build wheels (macOS11-ARM64)
    runs-on:
    - self-hosted
    - macOS-11-ARM64
    steps:
    - run: date
    - run: |
        pip install --no-cache psutil==5.9.0 --target psutil-test
        file psutil-test/psutil/*.so
    - run: |
        curl -LO https://github.com/solidiquis/erdtree/releases/download/v3.1.2/erd-v3.1.2-aarch64-apple-darwin.tar.gz
        tar xvf erd-v3.1.2-aarch64-apple-darwin.tar.gz
    - run: "./erd --long --time=create --time-format=iso-strict ~/.cache/pants"
    - run: "./erd --long --time=create --time-format=iso-strict ~/Library/Caches"
name: Pull Request CI
'on':
  pull_request: {}
  push:
    branches:
    - main
    - 2.*.x
