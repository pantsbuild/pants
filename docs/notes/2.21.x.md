# 2.21.x Release Series

Pants 2 is a fast, scalable, user-friendly build system for codebases of all sizes. It's currently focused on Python, Go, Java, Scala, Kotlin, Shell, and Docker, with support for other languages and frameworks coming soon.

Individuals and companies can now [sponsor Pants financially](https://www.pantsbuild.org/sponsorship).

Pants is an open-source project that is not owned or controlled by any one company or organization, and does incur some expenses. These expenses are managed by Pants Build, a non-profit that was established for this purpose. This non-profit's only source of revenue is sponsorship by individuals and companies that use Pants.

We offer [formal sponsorship tiers for companies](https://www.pantsbuild.org/sponsorship), as well as individual sponsorships via [GitHub](https://github.com/sponsors/pantsbuild).

## What's New

### Highlights


Keep reading to see the details and what's also included.

### Overall


### BUILD files


### Remote caching/execution


### Backends

#### Adhoc


#### Docker


#### Go


#### Helm


#### JavaScript


#### JVM


##### Scala


#### Python


#### Terraform



#### TypeScript


### Plugin API changes


## Full Changelog

For the full changelog, see the individual GitHub Releases for this series: https://github.com/pantsbuild/pants/releases


# release_2.21.0a0

## New Features

* Add additional modules to default module mapping ([#20813](https://github.com/pantsbuild/pants/pull/20813))

* add some module mappings ([#20800](https://github.com/pantsbuild/pants/pull/20800))

* Added a `goals` field to the `peek` JSON output ([#20331](https://github.com/pantsbuild/pants/pull/20331))

* Improve exported mutable_virtualenv prompt ([#20796](https://github.com/pantsbuild/pants/pull/20796))

* Add export option: py_hermetic_scripts ([#20763](https://github.com/pantsbuild/pants/pull/20763))

* Visibility: support `dict` rules same way as for selectors. ([#20769](https://github.com/pantsbuild/pants/pull/20769))

* Add python312 runtime to python_google_cloud_function ([#20786](https://github.com/pantsbuild/pants/pull/20786))

* Add documentation-related sources to `helm_chart` ([#15638](https://github.com/pantsbuild/pants/pull/15638))

## User API Changes

* Replaced pre-commit githook with pre-push ([#20784](https://github.com/pantsbuild/pants/pull/20784))

## Bug Fixes

* Fixed install_git_hooks.sh does not work if "python" is not found (but python3 exists) ([#20783](https://github.com/pantsbuild/pants/pull/20783))

* re-add missing opentelemetry.util module mapping ([#20804](https://github.com/pantsbuild/pants/pull/20804))

* Fix direct_url in python PEP660 editable wheels (again) ([#20798](https://github.com/pantsbuild/pants/pull/20798))

* provide a more friendly pointer on unconfigured constraint file ([#20781](https://github.com/pantsbuild/pants/pull/20781))

* update Pex to 2.3.1 ([#20782](https://github.com/pantsbuild/pants/pull/20782))

* Fix issue with explicit dependency when using parametrize groups. ([#20768](https://github.com/pantsbuild/pants/pull/20768))

## Performance

* Set --no-pre-install-wheels and PEX_MAX_INSTALL_JOBS for faster builds of internal pexes ([#20670](https://github.com/pantsbuild/pants/pull/20670))

## Documentation

* fix Python & NodeJS lockfiles doc ([#20812](https://github.com/pantsbuild/pants/pull/20812))

* improve plants plugin resolve docs ([#20780](https://github.com/pantsbuild/pants/pull/20780))

# release_2.21.0.dev6

## New Features

* Make tools exportable ([#20730](https://github.com/pantsbuild/pants/pull/20730))

* Allow plugin authors to attach custom fields to TargetData for pants peek ([#20701](https://github.com/pantsbuild/pants/pull/20701))

## User API Changes

* Remove the deprecated implicit_value option kwarg. ([#20762](https://github.com/pantsbuild/pants/pull/20762))

# release_2.21.0.dev5

NB. this release is broken on arm64 macOS, see https://github.com/pantsbuild/pants/issues/20765.

## New Features

* stats: add output format option to save Pants stats as JSON ([#20579](https://github.com/pantsbuild/pants/pull/20579))

* Allow passing arguments to PEX invocation used for `pex_binary` ([#20737](https://github.com/pantsbuild/pants/pull/20737))

* Print reduced `pants test ...` command to rerun, when on CI ([#20747](https://github.com/pantsbuild/pants/pull/20747))

* add latest 3.13/3.14 helm versions; upgrade default ([#20743](https://github.com/pantsbuild/pants/pull/20743))

## Plugin API Changes

* Deprecate the implicit_value option registration kwarg. ([#20757](https://github.com/pantsbuild/pants/pull/20757))

## Bug Fixes

* Restore some opentelemetry module mappings ([#20749](https://github.com/pantsbuild/pants/pull/20749))

* upgrade Pex to 2.3.0 ([#20734](https://github.com/pantsbuild/pants/pull/20734))

* Properly format error about invalid scope names ([#20712](https://github.com/pantsbuild/pants/pull/20712))

## Performance

* Make all "local dists" PEXes internal-only ([#20746](https://github.com/pantsbuild/pants/pull/20746))

## Documentation

* Add "what's new" in 2.20 ([#20687](https://github.com/pantsbuild/pants/pull/20687))

* Use `[]()` links not `<>` in `[pex].emit_warnings` docs ([#20716](https://github.com/pantsbuild/pants/pull/20716))

* Add extra newlines to avoid softwrapping the :::caution in `export` docs ([#20715](https://github.com/pantsbuild/pants/pull/20715))

# release_2.21.0.dev4

## New Features

* use default upstream and upgrade shellcheck ([#20702](https://github.com/pantsbuild/pants/pull/20702))

* Add test retries to remaining backends ([#20606](https://github.com/pantsbuild/pants/pull/20606))

## Bug Fixes

* docker buildx output format changed in 0.13.1 ([#20693](https://github.com/pantsbuild/pants/pull/20693))

* Core: Fix `__defaults__` to also apply for generated file targets. ([#20649](https://github.com/pantsbuild/pants/pull/20649))

## Documentation

* Update welcome-to-pants.mdx - fix link to sample users ([#20688](https://github.com/pantsbuild/pants/pull/20688))

* Link to rate limit issue in GitHub Actions remote cache provider docs ([#20690](https://github.com/pantsbuild/pants/pull/20690))

* docs: update docs for debian_package target ([#20665](https://github.com/pantsbuild/pants/pull/20665))

* update docs to use proper docker sha256 format ([#20685](https://github.com/pantsbuild/pants/pull/20685))

# release_2.21.0.dev3

## New Features

* Docker: Support multiple `cache_from` values for `docker_image`. ([#20600](https://github.com/pantsbuild/pants/pull/20600))

## Bug Fixes

* Support Go versioning with patch ([#20677](https://github.com/pantsbuild/pants/pull/20677))

## Documentation

* fix doc link ([#20680](https://github.com/pantsbuild/pants/pull/20680))

* Add Pyright, Pytype and Ruff to Python overview docs ([#20663](https://github.com/pantsbuild/pants/pull/20663))

# release_2.21.0.dev2

## New Features

* Allow fromfile config value to be optional ([#20571](https://github.com/pantsbuild/pants/pull/20571))

## User API Changes

* Upgrade Ruff to v0.3.0 ([#20647](https://github.com/pantsbuild/pants/pull/20647))

## Bug Fixes

* Docker: fix base image dependency inference for parametrized targets. ([#20633](https://github.com/pantsbuild/pants/pull/20633))

# release_2.21.0.dev0

## New Features

* allow passing extra docker run args to docker_image ([#20607](https://github.com/pantsbuild/pants/pull/20607))

* Add support for Scalafix ([#20394](https://github.com/pantsbuild/pants/pull/20394))

* run `terraform plan` when setting `--dry-run` flag on `experimental-deploy` goal ([#20488](https://github.com/pantsbuild/pants/pull/20488))

## User API Changes

* Remove now-expired deprecated `python_awslambda` alias ([#20619](https://github.com/pantsbuild/pants/pull/20619))

## Bug Fixes

* Resolve adhoc_tool, code_quality_tool execution dependencies relative to target location ([#20581](https://github.com/pantsbuild/pants/pull/20581))

* Silence warnings from Pex by default, for now ([#20590](https://github.com/pantsbuild/pants/pull/20590))

* javascript: package yarn v2 ([#20540](https://github.com/pantsbuild/pants/pull/20540))

* Fix update build files formatter selection ([#20580](https://github.com/pantsbuild/pants/pull/20580))

* Remove asm -compiling-runtime flag for go 1.22+ compatible versions ([#20554](https://github.com/pantsbuild/pants/pull/20554))

* Add all new Ruff backends to list of plugins ([#20555](https://github.com/pantsbuild/pants/pull/20555))

## Documentation

* Document the need for migrating tool to user lockfiles for export ([#20604](https://github.com/pantsbuild/pants/pull/20604))

* Update `doc_url` calls for new website ([#20583](https://github.com/pantsbuild/pants/pull/20583))

* docs: export dependency graph as adjacency list ([#20566](https://github.com/pantsbuild/pants/pull/20566))

* Restructure JVM docs. ([#20544](https://github.com/pantsbuild/pants/pull/20544))

---

(NB. this release had its tag moved to a different commit and then back on 2024-03-04. The built artifacts are from the first time it was pointing at this commit, not the current tag. [ref](https://chat.pantsbuild.org/t/16640400/oops-i-think-i-just-re-tagged-2-21-0-dev0-incorrectly-and-th#12ed63f0-4e77-4c75-b7bc-92ec99fdbfd9).)
# release_2.21.0.dev1
