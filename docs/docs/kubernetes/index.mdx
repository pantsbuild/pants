---
    title: Kubernetes Overview
    sidebar_position: 999
---

---

:::caution Kubernetes support is in alpha stage
Pants is currently building support for Kubernetes. Simple use cases might be
supported, but many options are missing.

Please share feedback for what you need to use Pants with your Kubernetes queries by
either [opening a GitHub
issue](https://github.com/pantsbuild/pants/issues/new/choose) or [joining our
Slack](/community/getting-help)!
:::

## Initial setup

First, activate the relevant backend in `pants.toml`:

```toml title="pants.toml"
[GLOBAL]
backend_packages = [
  ...
  "pants.backend.experimental.k8s",
  ...
]
```

The Kubernetes backend adds [`k8s_source`](../../reference/targets/k8s_source.mdx) and
[`k8s_sources`](../../reference/targets/k8s_sources.mdx) target types for Kubernetes object
files. The `tailor` goal will automatically generate the targets for
your .yaml files.

For example, create a file `src/k8s/configmap.yaml`:

```yaml title="src/k8s/configmap.yaml"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: spark-defaults-conf
data:
  spark-defaults.conf: |
    spark.driver.memory=1g
    spark.executor.cores=1
    spark.executor.instances=1
    spark.executor.memory=2g
```

Now run:

```bash
pants tailor src/k8s:
```
```
Created src/k8s/BUILD:
  - Add k8s_sources target k8s
```

## Deploying objects to a cluster

We'll be using a local [kind](https://kind.sigs.k8s.io/) cluster throughout the
tutorial. First, spin up a cluster:

```bash
kind create cluster
```
```
Creating cluster "kind" ...
 ✓ Ensuring node image (kindest/node:v1.25.3) 🖼 
 ✓ Preparing nodes 📦  
 ✓ Writing configuration 📜 
 ✓ Starting control-plane 🕹️ 
 ✓ Installing CNI 🔌 
 ✓ Installing StorageClass 💾 
Set kubectl context to "kind-kind"
```

Second, configure the list of available contexts in `pants.toml`:

```toml title="pants.toml"
...

[k8s]
available_contexts = [
  "kind-kind",
]
```

Third, create a deployable target `k8s_bundle` in `src/k8s/BUILD`:

```python title="src/k8s/BUILD"
k8s_sources()
k8s_bundle(
    name="configmap",
    sources=("src/k8s/configmap.yaml",),
    context="kind-kind",
)
```

Now you can deploy the target:

```bash
pants experimental-deploy src/k8s:configmap
```
```
✓ src/k8s:configmap deployed to context kind-kind
```

