---
    title: SQL Overview
    sidebar_position: 999
---

---

:::caution SQL support is in alpha stage
Pants is currently building support for SQL. Simple use cases might be
supported, but many options are missing.

Please share feedback for what you need to use Pants with your SQL queries by
either [opening a GitHub
issue](https://github.com/pantsbuild/pants/issues/new/choose) or [joining our
Slack](/community/getting-help)!
:::

## Initial setup

First, activate the relevant backend in `pants.toml`:

```toml title="pants.toml"
[GLOBAL]
backend_packages = [
  ...
  "pants.backend.experimental.sql",
  ...
]
```

The SQL backend adds [`sql_source`](../../reference/targets/sql_source.mdx) and
[`sql_sources`](../../reference/targets/sql_sources.mdx) target types for SQL
files. The [`sql_source`](../../reference/targets/sql_source.mdx) behaves like
[`resource`](../../reference/targets/resource.mdx), so you can use it directly
without wrappers. The `tailor` goal will automatically generate the targets for
your .sql files.

## Enable sqlfluff linter

To enable the linter activate the relevant backend in `pants.toml`:

```toml title="pants.toml"
[GLOBAL]
backend_packages = [
  ...
  "pants.backend.experimental.sql.lint.sqlfluff",
  ...
]
```

You can run the linter via `lint` goal:
```
pants lint --only=sqlfluff ::
```

## Using different templaters

Sqlfluff doesn't support using different templaters in subdirectories. If you
try to set `templater` in a subdirectory you'll get something like this:

```
WARNING    Attempt to set templater to jinja failed. Using python templater.
Templater cannot be set in a .sqlfluff file in a subdirectory of the current
working directory. It can be set in a .sqlfluff in the current working
directory. See Nesting section of the docs for more details.
```

However, pants overcomes this limitation by running multiple sqlfluff processes
in parallel. You can set the `templater` config value and pants will figure out
how to partition your files:

```toml tab={"label":"a/.sqlfluff"}
[sqlfluff]
templater = python
dialect = postgres
```

```sql tab={"label":"a/query.sql"}
select * from {table}
```

```toml tab={"label":"b/.sqlfluff"}
[sqlfluff]
templater = jinja
dialect = postgres
```

```sql tab={"label":"b/query.sql"}
select * from {{table}}
```
