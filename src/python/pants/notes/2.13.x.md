# 2.12.x Release Series

## 2.13.0.dev0 (May 04, 2022)

### New Features

* Add lz4 support to archive extraction ([#15245](https://github.com/pantsbuild/pants/pull/15245))

* Implement `tailor` goal for Helm charts ([#15191](https://github.com/pantsbuild/pants/pull/15191))
* Write virtualenvs for Python tools as part of `export` ([#15098](https://github.com/pantsbuild/pants/pull/15098))

### User API Changes


* Deprecate `[golang].expected_version` in favor of more flexible `[golang].minimum_expected_version` ([#15306](https://github.com/pantsbuild/pants/pull/15306))
* Upgrade Pex to 2.1.84. ([#15288](https://github.com/pantsbuild/pants/pull/15288))
* Upgrade Pex to 2.1.83. ([#15281](https://github.com/pantsbuild/pants/pull/15281))
* Upgrade Pex to 2.1.82. ([#15200](https://github.com/pantsbuild/pants/pull/15200))
* Upgrade Pex to 2.1.80. ([#15179](https://github.com/pantsbuild/pants/pull/15179))

### Plugin API Changes


* Allow for arbitrary suffixes when extracting ([#15257](https://github.com/pantsbuild/pants/pull/15257))

### Bug fixes

* Don't strip source roots when building dists with an existing setup.py ([#15303](https://github.com/pantsbuild/pants/pull/15303))

* Fix a bug in the python venv export logic. ([#15294](https://github.com/pantsbuild/pants/pull/15294))

* Fix non-determinism of `package_data` in generated `setup.py` files ([#15292](https://github.com/pantsbuild/pants/pull/15292))
* Simplify BSP metadata merging, and handle the empty list. ([#15283](https://github.com/pantsbuild/pants/pull/15283))
* BSP resolve filtering observes computed default values of resolve fields ([#15282](https://github.com/pantsbuild/pants/pull/15282))
* Memoize equality for `CoarsenedTarget(s)` to avoid exponential runtime in `check`. ([#15277](https://github.com/pantsbuild/pants/pull/15277))
* Fix ambiguity of Scala `package object`s with `class` or `object` definitions ([#15265](https://github.com/pantsbuild/pants/pull/15265))
* Fix issue with Docker publish when using `[docker] tools`. ([#15255](https://github.com/pantsbuild/pants/pull/15255))
* Do not lowercase Docker image tags. ([#15254](https://github.com/pantsbuild/pants/pull/15254))
* Fix the placement of the pex verbosity args. ([#15243](https://github.com/pantsbuild/pants/pull/15243))

* Fix use of `@` in path names. ([#15226](https://github.com/pantsbuild/pants/pull/15226))
* Fix lockfile generation for duplicate `jvm_artifact` targets with `jar` fields. ([#15219](https://github.com/pantsbuild/pants/pull/15219))
* Support poetry wildcard requirements. ([#15213](https://github.com/pantsbuild/pants/pull/15213))
* golang: add more cache keys based on tool IDs ([#15205](https://github.com/pantsbuild/pants/pull/15205))

### Performance

* Eagerly skip tools with default lockfiles in `export-lockfiles` goal ([#15304](https://github.com/pantsbuild/pants/pull/15304))
* `MyPy` and `Pylint` partition inputs via `CoarsenedTarget` ([#15141](https://github.com/pantsbuild/pants/pull/15141))


### Documentation

* Fix `ProtobufSourcesOverridesField` help message ([#15272](https://github.com/pantsbuild/pants/pull/15272))

* Update `help` for python resolves with recent improvements ([#15228](https://github.com/pantsbuild/pants/pull/15228))
* Don't log set up of binary shims ([#15203](https://github.com/pantsbuild/pants/pull/15203))
* Mention resolve when partitioning Mypy and Pylint ([#15172](https://github.com/pantsbuild/pants/pull/15172))

### Internal (put these in a PR comment for review, not the release notes)

* Remove deprecated traceback formatting argument. ([#15320](https://github.com/pantsbuild/pants/pull/15320))

* Work around poisoned cache for macOS CI ([#15324](https://github.com/pantsbuild/pants/pull/15324))

* Prepare 2.11.0. ([#15298](https://github.com/pantsbuild/pants/pull/15298))
* Add Memory controls to JVM processes ([#15224](https://github.com/pantsbuild/pants/pull/15224))
* Prepare `2.10.1rc1`. ([#15291](https://github.com/pantsbuild/pants/pull/15291))
* Prepare 2.11.0rc6. ([#15290](https://github.com/pantsbuild/pants/pull/15290))
* Prepare `2.12.0a0`. ([#15287](https://github.com/pantsbuild/pants/pull/15287))
* Merge the JVM first and third party mappings ([#15263](https://github.com/pantsbuild/pants/pull/15263))
* Prepare 2.11.0rc5 ([#15264](https://github.com/pantsbuild/pants/pull/15264))
* Revert "[internal] add mark and fixture for lockfile generation (#15190)" ([#15267](https://github.com/pantsbuild/pants/pull/15267))
* [internal] add mark and fixture for lockfile generation ([#15190](https://github.com/pantsbuild/pants/pull/15190))
* Add more 2.11.0rc4 changes ([#15248](https://github.com/pantsbuild/pants/pull/15248))
* [internal] kotlin: add support for `kotlinc` compiler plugins ([#15184](https://github.com/pantsbuild/pants/pull/15184))
* [internal] java: use lockfile for dependency inference parser ([#15223](https://github.com/pantsbuild/pants/pull/15223))
* [internal] scala: use lockfile for dependency inference parser ([#15222](https://github.com/pantsbuild/pants/pull/15222))
* [internal] kotlin: do not expose kotlin parser's lockfile to users ([#15236](https://github.com/pantsbuild/pants/pull/15236))
* [internal] jvm: split lockfile access into read and write paths ([#15242](https://github.com/pantsbuild/pants/pull/15242))
* Cache comparison job fixes: round 2 ([#15235](https://github.com/pantsbuild/pants/pull/15235))
* Simplify test for Go Protobuf ([#15237](https://github.com/pantsbuild/pants/pull/15237))
* [internal] kotlin: use lockfile for dependency inference parser ([#15221](https://github.com/pantsbuild/pants/pull/15221))
* [internal] kotlin: add `--kotlinc-args` option ([#15229](https://github.com/pantsbuild/pants/pull/15229))
* [internal] kotlin: add kotlin and ktlint backends to docs ([#15227](https://github.com/pantsbuild/pants/pull/15227))
* Prepare 2.11.0rc4 ([#15210](https://github.com/pantsbuild/pants/pull/15210))
* Fix commit hooks script for rename of `.git-blame-ignore-revs`. ([#15216](https://github.com/pantsbuild/pants/pull/15216))
* [internal] improve error message to be less confusing ([#15202](https://github.com/pantsbuild/pants/pull/15202))
* bsp: show experimental-bsp goal in help ([#15208](https://github.com/pantsbuild/pants/pull/15208))
* Bump clap from 3.1.6 to 3.1.10 in /src/rust/engine ([#15195](https://github.com/pantsbuild/pants/pull/15195))
* [internal] kotlin: switch to "embeddable" compiler and Kotlin v1.6.20 ([#15207](https://github.com/pantsbuild/pants/pull/15207))
* Bump ignore from 0.4.17 to 0.4.18 in /src/rust/engine ([#15192](https://github.com/pantsbuild/pants/pull/15192))
* Bump async-lock from 2.4.0 to 2.5.0 in /src/rust/engine ([#15193](https://github.com/pantsbuild/pants/pull/15193))
* Bump toml from 0.5.8 to 0.5.9 in /src/rust/engine ([#15194](https://github.com/pantsbuild/pants/pull/15194))
* Cache comparison job fixes: round 1. ([#15185](https://github.com/pantsbuild/pants/pull/15185))
* Add a workflow for comparing remote cache performance across builds ([#15183](https://github.com/pantsbuild/pants/pull/15183))
* Kill now-unused global scalac plugins lock file. ([#15178](https://github.com/pantsbuild/pants/pull/15178))
* Bump pyo3-build-config from 0.16.2 to 0.16.4 in /src/rust/engine ([#15167](https://github.com/pantsbuild/pants/pull/15167))
* Work around Git CVE-2022-24765 related failures. ([#15173](https://github.com/pantsbuild/pants/pull/15173))
* [internal] jvm: move prefixed `resolve` and `jdk` fields to jvm package ([#15169](https://github.com/pantsbuild/pants/pull/15169))

* [internal] kotlin: add goal to dump source analysis ([#15170](https://github.com/pantsbuild/pants/pull/15170))

* [internal] kotlin: infer dependencies on Kotlin runtime jars ([#15164](https://github.com/pantsbuild/pants/pull/15164))

* [internal] kotlin: add dependency inference based on consumed symbols ([#15163](https://github.com/pantsbuild/pants/pull/15163))
* Bump rlimit from 0.7.0 to 0.8.3 in /src/rust/engine ([#15165](https://github.com/pantsbuild/pants/pull/15165))
* Cherry-pick script improvements ([#15159](https://github.com/pantsbuild/pants/pull/15159))

* Bump log from 0.4.14 to 0.4.16 in /src/rust/engine ([#15136](https://github.com/pantsbuild/pants/pull/15136))

* Bump indexmap from 1.8.0 to 1.8.1 in /src/rust/engine ([#15135](https://github.com/pantsbuild/pants/pull/15135))

* Bump cargo_metadata from 0.10.0 to 0.14.2 in /src/rust/engine ([#15134](https://github.com/pantsbuild/pants/pull/15134))

--------------------------------------------------------------------


















